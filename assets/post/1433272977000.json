{"title":"ActionBar使用总结","createTime":1433272977000,"updateTime":1433273021000,"category":"default","content":" \n  \n #ActionBar使用  \n 资料：<http://developer.android.com/training/basics/actionbar/index.html> \n  \n ##基本使用 \n __Android 3.0(API Level 11)后开始使用ActionBar__ \n  \n __Android 3.0以上版本使用ActionBar__ \n  \n * manifest文件中最小sdk版本设置为11：<uses-sdk android:minSdkVersion=\"11\"> \n * 使用Theme.Holo（或者它子类）主题 \n  \n __兼容Android 2.1及以后版本使用Android__ \n * 使用v7 appcompat Library \n * Activity继承ActionBarActivity \n * 主题使用AppCompate.Light(或它的子类)：<activity android:theme=\"@style/Theme.AppCompat.Light\"> \n  \n __ActionBar上添加Buttons__ \n 只支持Android3.0 及以上版本 \n  \n ```xml \n res/menu/main_activity_actions.xml \n <menu xmlns:android=\"http://schemas.android.com/apk/res/android\" > \n     <!-- Search, should appear as action button --> \n     <item android:id=\"@+id/action_search\" \n           android:icon=\"@drawable/ic_action_search\" \n           android:title=\"@string/action_search\" \n           android:showAsAction=\"ifRoom\" /> \n     <!-- Settings, should always be in the overflow --> \n     <item android:id=\"@+id/action_settings\" \n           android:title=\"@string/action_settings\" \n           android:showAsAction=\"never\" /> \n </menu> \n ``` \n 使用v7 appcompat library 兼容 Android 2.1 及以上版本 \n  \n ```xml \n res/menu/main_activity_actions.xml \n <menu xmlns:android=\"http://schemas.android.com/apk/res/android\" \n       xmlns:yourapp=\"http://schemas.android.com/apk/res-auto\" > \n     <!-- Search, should appear as action button --> \n     <item android:id=\"@+id/action_search\" \n           android:icon=\"@drawable/ic_action_search\" \n           android:title=\"@string/action_search\" \n           <!--使用兼容包不能使用android:xx --> \n           yourapp:showAsAction=\"ifRoom\"  /> \n     ... \n </menu> \n ``` \n 代码片段 \n  \n ```java \n @Override \n public boolean onCreateOptionsMenu(Menu menu) { \n     // 为ActionBar扩展菜单项 \n     MenuInflater inflater = getMenuInflater(); \n     inflater.inflate(R.menu.main_activity_actions, menu); \n     return super.onCreateOptionsMenu(menu); \n } \n  \n @Override \n public boolean onCreateOptionsMenu(Menu menu) { \n     // Inflate the menu items for use in the action bar \n     MenuInflater inflater = getMenuInflater(); \n     inflater.inflate(R.menu.main_activity_actions, menu); \n     return super.onCreateOptionsMenu(menu); \n } \n  \n @Override \n public boolean onOptionsItemSelected(MenuItem item) { \n     // Handle presses on the action bar items \n     switch (item.getItemId()) { \n         case R.id.action_search: \n             openSearch(); \n             return true; \n         case R.id.action_settings: \n             openSettings(); \n             return true; \n         default: \n             return super.onOptionsItemSelected(item); \n     } \n } \n  \n //为下级Activity启动向上返回父Activity功能 \n <application ... > \n     ... \n     <!-- The main/home activity (it has no parent activity) --> \n     <activity \n         android:name=\"com.example.myfirstapp.MainActivity\" ...> \n         ... \n     </activity> \n     <!-- A child of the main activity --> \n     <activity \n         android:name=\"com.example.myfirstapp.DisplayMessageActivity\" \n         android:label=\"@string/title_activity_display_message\" \n         android:parentActivityName=\"com.example.myfirstapp.MainActivity\" > \n         <!-- Parent activity meta-data to support 4.0 and lower --> \n         <meta-data \n             android:name=\"android.support.PARENT_ACTIVITY\" \n             android:value=\"com.example.myfirstapp.MainActivity\" /> \n     </activity> \n </application> \n  \n @Override \n public void onCreate(Bundle savedInstanceState) { \n     super.onCreate(savedInstanceState); \n     setContentView(R.layout.activity_displaymessage); \n  \n     getSupportActionBar().setDisplayHomeAsUpEnabled(true); \n     // If your minSdkVersion is 11 or higher, instead use: \n     // getActionBar().setDisplayHomeAsUpEnabled(true); \n } \n ``` \n  \n __ActionBar上添加Navigation Tabs__ \n  \n ##ActionBar样式设置 \n __基本样式__ \n  \n * Theme.Holo \n * Theme.Holo.Light \n * Theme.AppCompat \n * Theme.AppCompat.Light \n * Theme.AppCompat.Light.DarkActionBar \n  \n __自定义样式__ \n  \n 仅支持3.0及其以后 \n  \n ```xml \n res/values/themes.xml \n <?xml version=\"1.0\" encoding=\"utf-8\"?> \n <resources> \n     <!-- 应用于程序或者活动的主题 --> \n     <style name=\"CustomActionBarTheme\" \n            parent=\"@style/Theme.Holo\"> \n         <item name=\"android:actionBarStyle\">@style/MyActionBar</item> \n         <item name=\"android:actionBarTabTextStyle\">@style/MyActionBarTabText</item> \n         <item name=\"android:actionMenuTextColor\">@color/actionbar_text</item> \n     </style> \n  \n     <!-- ActionBar 样式 --> \n     <style name=\"MyActionBar\" \n            parent=\"@style/Widget.Holo.ActionBar\"> \n         <item name=\"android:titleTextStyle\">@style/MyActionBarTitleText</item> \n     </style> \n  \n     <!-- ActionBar 标题文本 --> \n     <style name=\"MyActionBarTitleText\" \n            parent=\"@style/TextAppearance.Holo.Widget.ActionBar.Title\"> \n         <item name=\"android:textColor\">@color/actionbar_text</item> \n     </style> \n  \n     <!-- ActionBar Tab标签 文本样式 --> \n     <style name=\"MyActionBarTabText\" \n            parent=\"@style/Widget.Holo.ActionBar.TabText\"> \n         <item name=\"android:textColor\">@color/actionbar_text</item> \n     </style> \n </resources> \n ``` \n 使用Support库兼容2.1及其以后版本 \n  \n ```xml \n res/values/themes.xml \n <?xml version=\"1.0\" encoding=\"utf-8\"?> \n <resources> \n     <!-- 应用于程序或者活动的主题 --> \n     <style name=\"CustomActionBarTheme\" \n            parent=\"@style/Theme.AppCompat\"> \n         <item name=\"android:actionBarStyle\">@style/MyActionBar</item> \n         <item name=\"android:actionBarTabTextStyle\">@style/MyActionBarTabText</item> \n         <item name=\"android:actionMenuTextColor\">@color/actionbar_text</item> \n  \n         <!-- 支持库兼容 --> \n         <item name=\"actionBarStyle\">@style/MyActionBar</item> \n         <item name=\"actionBarTabTextStyle\">@style/MyActionBarTabText</item> \n         <item name=\"actionMenuTextColor\">@color/actionbar_text</item> \n     </style> \n  \n     <!-- ActionBar 样式 --> \n     <style name=\"MyActionBar\" \n            parent=\"@style/Widget.AppCompat.ActionBar\"> \n         <item name=\"android:titleTextStyle\">@style/MyActionBarTitleText</item> \n  \n         <!-- 支持库兼容 --> \n         <item name=\"titleTextStyle\">@style/MyActionBarTitleText</item> \n     </style> \n  \n     <!-- ActionBar 标题文本 --> \n     <style name=\"MyActionBarTitleText\" \n            parent=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Title\"> \n         <item name=\"android:textColor\">@color/actionbar_text</item> \n         <!-- 文本颜色属性textColor是可以配合支持库向后兼容的 --> \n     </style> \n  \n     <!-- ActionBar Tab标签文本样式 --> \n     <style name=\"MyActionBarTabText\" \n            parent=\"@style/Widget.AppCompat.ActionBar.TabText\"> \n         <item name=\"android:textColor\">@color/actionbar_text</item> \n         <!-- 文本颜色属性textColor是可以配合支持库向后兼容的 --> \n     </style> \n </resources> \n ``` \n  \n __设置Navigation Tags样式__ \n  \n 仅支持Android 3.0及其以上版本 \n  \n ```xml \n res/values/themes.xml \n <?xml version=\"1.0\" encoding=\"utf-8\"?> \n <resources> \n     <!-- 应用于程序或活动的主题 --> \n     <style name=\"CustomActionBarTheme\" \n            parent=\"@style/Theme.Holo\"> \n         <item name=\"android:actionBarTabStyle\">@style/MyActionBarTabs</item> \n     </style> \n  \n     <!-- ActionBar tabs 标签样式 --> \n     <style name=\"MyActionBarTabs\" \n            parent=\"@style/Widget.Holo.ActionBar.TabView\"> \n         <!-- 标签指示器 --> \n         <item name=\"android:background\">@drawable/actionbar_tab_indicator</item> \n     </style> \n </resources> \n  \n ``` \n  \n 使用Support库，兼容Android 2.1及其以上版本 \n  \n ```xml \n res/values/themes.xml \n  \n <?xml version=\"1.0\" encoding=\"utf-8\"?> \n <resources> \n     <!-- 应用于程序或活动的主题 --> \n     <style name=\"CustomActionBarTheme\" \n            parent=\"@style/Theme.AppCompat\"> \n         <item name=\"android:actionBarTabStyle\">@style/MyActionBarTabs</item> \n  \n         <!-- 支持库兼容 --> \n         <item name=\"actionBarTabStyle\">@style/MyActionBarTabs</item> \n     </style> \n  \n     <!-- ActionBar tabs 样式 --> \n     <style name=\"MyActionBarTabs\" \n            parent=\"@style/Widget.AppCompat.ActionBar.TabView\"> \n         <!-- 标签指示器 --> \n         <item name=\"android:background\">@drawable/actionbar_tab_indicator</item> \n  \n         <!-- 支持库兼容 --> \n         <item name=\"background\">@drawable/actionbar_tab_indicator</item> \n     </style> \n </resources> \n ``` \n  \n ##Overlaying the Action Bar \n  \n 仅支持Android 3.0及其以上 \n ```xml \n <resources> \n     <!-- the theme applied to the application or activity --> \n     <style name=\"CustomActionBarTheme\" \n            parent=\"@android:style/Theme.Holo\"> \n         <item name=\"android:windowActionBarOverlay\">true</item> \n     </style> \n </resources> \n ``` \n  \n 使用Support库，兼容Android 2.1及其上版本 \n  \n ```xml \n <resources> \n     <!-- 为程序或者活动应用的主题样式 --> \n     <style name=\"CustomActionBarTheme\" \n            parent=\"@android:style/Theme.AppCompat\"> \n         <item name=\"android:windowActionBarOverlay\">true</item> \n  \n         <!-- 兼容支持库 --> \n         <item name=\"windowActionBarOverlay\">true</item> \n     </style> \n </resources> \n ``` \n 注意：使用Support库时，样式熟悉不能是`android:paddingTop=\"?android:attr/actionBarSize\"`，而是`android:paddingTop=\"?attr/actionBarSize\"`。 \n  \n __使用 actionBarSize 属性来指定顶部margin或padding的高度__ \n  \n ```xml \n <RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" \n     android:layout_width=\"match_parent\" \n     android:layout_height=\"match_parent\" \n     android:paddingTop=\"?android:attr/actionBarSize\"> \n     ... \n </RelativeLayout> \n ```"}