---
title: 服务端接口设计
date: 2022-08-12 21:44:52
tags: 
categories: 
---

# 服务端接口设计


## 知乎上一个帖子
前端嫌我接口分的太多，我该怎么回答？ - flashyiyi的回答 - 知乎
https://www.zhihu.com/question/386053648/answer/1144558386
> 竟然这都需要讨论吗？野蛮生长都到什么程度了？

对，就是野蛮生长，大厂里面的人早就遇到过这种问题，也给出了解决方案，奈何这些有几年工作经验，接触过几个设计原则就以为什么都懂的小嘎嘎们出奇的自信。这种项目中普遍会遇到的架构问题，解决方案，应该在高校里面当作一门课程普及教育。


前端嫌我接口分的太多，我该怎么回答？ - 知乎用户zx2pWZ的回答 - 知乎
https://www.zhihu.com/question/386053648/answer/1153844736
> 领域层我们尽量保持干净，按照业务核心逻辑来设计。到了应用层，应用场景很多也很复杂，比如说用户端和管理端同样时候查数据，但是本质上是不同的需求，就需要有不同的标准去设计，这时候别还拿着设计领域层的标准去套。



## [一篇来自前端同学对后端接口的吐槽](https://www.v2think.com/toast-about-backend-API)

接口的消费方来主导接口的设计

接口有绝对好坏之分，不是代码风格，个人便好的问题
> 接口是有绝对好坏之分的，坏的接口消费者调用难受，提供者维护难受，还导致产品行为别扭体验变差。

后端发现问题应该解决问题，而不是抛出问题给其他模块。做出这种操作的原因，不是因为水平不够，没有意识到职责问题，就是偷懒。
> 他们始终没有明白的事情是，后端的实现导致了接口的碎片化，那是你的问题，而不应该把这部分负担转移到前端的开发者上，其实也是间接转移到了用户身上。不要欺负我不懂后端，至少我了解加一层类似于 BFF 的 Orchestration Layer 就能解决这个问题

接口分为两类
> 1. LSUD: Large set of unknown developers
> 2. SSKD: Small set of known developers

第一种面向未知用户，不知道具体产品的需求，提供粒度较小的功能单一的API，让消费者自己拼装业务功能。  
第二种面向公司内部用户，知道明确的产品需求，提供聚合的API。让应用层只需负责交互和数据展示，业务实现由服务器控制更安全，扩展性更强，更合理。（这种数据聚合的需求，很多人会简单的认为这只是数据获取问题，不对，其实数据聚合的过程（串行取数据还是并行取数据等等）本身就属于业务逻辑，只是属于应用层的业务逻辑）

关于自定义Code,Message封装Http返回的设计，也是后端**自嗨**的设计。

> * 我们真的需要一个平行于返回结果的字段展示 meta 信息吗？
> * 每一次请求我们都需要 meta 信息吗？
> * meta 信息一定要在 meta 字段里吗？

**数据都有，能用就行** 返回乱七八糟的数据，虽然能用，但是找不到一个合适的词来命名这些数据，这个现象的原因是，API作者没有去思考代码，数据所代表的业务意义是什么，只是单纯的把API当作数据通信的手段。
> API 和代码应该是精准的，准确表达你想实现的一切而不存在有歧义

遇到很多后端都会把不用新增API，以后不用什么都不用找我了当作是好设计的理由。实际上应用层的业务API是有生命周期的，随着应用功能的迭代它必然会存在一段时间，然后淘汰，然后要新写API。那些很稳定、不用变的API是属于核心的业务层API。
> 例如 Slack、Github，你会发现它们的接口是在不断迭代的。不断有旧的接口被淘汰，新的接口投入使用。这种迭代背后不是闲着没事干，而是出于实际的用户的声音和需求


[拥抱原则与面对现实](https://www.v2think.com/principles-and-facts)

> 遗憾的是有一些原则背后确实存在复杂的知识体系作为支撑，哪怕我用思维导图把背后涉猎的概念一五一十的列举出来，你的内心可能依然毫无波澜。因为其中的很多原则需要在你经历过相似代码的前提下才能心领神会，轮扁斫轮寓意也是在此。

遇到过相似的问题，产生过思考，然后遇到对应的知识文章，才能心领神会，醍醐灌顶。


## Backend-for-froned(bff)
* [为什么 backend-for-fronend 日趋流行？](https://zhuanlan.zhihu.com/p/127525948)
* [BFF —— Backend For Frontend](https://www.jianshu.com/p/eb1875c62ad3)
